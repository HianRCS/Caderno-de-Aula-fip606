---
title: "Datapasta e Tabelas"
format: html
editor: visual
warning: false
mensage: false
---

## Usando o datapasta

O datapasta é um pacote R e um add-in do RStudio que facilita a cópia e colagem de dados entre o R e outras fontes, como planilhas, sites e o terminal.

```{r}
dat <- data.frame(c("comp", "9", "12.5", "10", "8", "13.2", "11", "10.8", "9.5", "10.8", "10.4", "13.72", "15.91", "15.7", "14.2", "15.9", "16.54", "18", "14.4", "16.41", "16"))




dat
tibble::tribble(
      ~trat, ~rep, ~comp,
      "Mg2",   1L,     9,
      "Mg2",   2L,  12.5,
      "Mg2",   3L,    10,
      "Mg2",   4L,     8,
      "Mg2",   5L,  13.2,
      "Mg2",   6L,    11,
      "Mg2",   7L,  10.8,
      "Mg2",   8L,   9.5,
      "Mg2",   9L,  10.8,
      "Mg2",  10L,  10.4,
  "control",   1L, 13.72,
  "control",   2L, 15.91,
  "control",   3L,  15.7,
  "control",   4L,  14.2,
  "control",   5L,  15.9,
  "control",   6L, 16.54,
  "control",   7L,    18,
  "control",   8L,  14.4,
  "control",   9L, 16.41,
  "control",  10L,    16
  )


```

## Copiando os Dados da Internet

Copie tabelas HTML de sites e cole-as diretamente no R como um dataframe. O datapasta extrai os dados da tabela e os organiza em um dataframe estruturado.

Copie dados tabulados (com separadores como vírgulas ou tabulações) e cole-os diretamente no R como um dataframe. O datapasta infere os nomes das colunas e os tipos de dados automaticamente.

```{r}
library(pak)



visitas <- tibble::tribble(
             ~V1,              ~V2, ~V3,
              1L,      "Argentina",  1L,
              2L,        "Austria",  1L,
              3L,        "Bolivia",  1L,
              4L,     "Cape Verde",  1L,
              5L,          "China",  1L,
              6L,          "Egypt",  1L,
              7L,        "Finland",  1L,
              8L,          "India",  1L,
              9L,          "Italy",  1L,
             10L,       "Malaysia",  1L,
             11L,       "Pakistan",  1L,
             12L,         "Poland",  1L,
             13L,      "Singapore",  1L,
             14L,    "Timor-Leste",  1L,
             15L,        "Uruguay",  1L,
             16L,          "Chile",  2L,
             17L,       "Paraguay",  2L,
             18L,           "Peru",  2L,
             19L,        "Ecuador",  3L,
             20L,         "France",  3L,
             21L,    "Netherlands",  4L,
             22L,        "Germany",  5L,
             23L,        "Hungary",  5L,
             24L, "United Kingdom",  5L,
             25L,       "Colombia",  8L,
             26L,      "(not set)", 12L,
             27L,          "Spain", 16L,
             28L,         "Angola", 19L,
             29L,  "United States", 23L,
             30L,       "Portugal", 33L,
             31L,     "Mozambique", 43L,
             32L, "Brasil", 4,
             )




```

# Outros Dados da Internet

```{r}
library(tidyverse)

pepper <- 
  tribble(
   ~t,  ~`1`,  ~`2`,  ~`3`,
   0,  0.08, 0.001, 0.001,
   7,  0.13,  0.01, 0.001,
  14,  0.78,  0.09,  0.01,
  21,  0.92,  0.25,  0.05,
  28,  0.99,   0.8,  0.18,
  35, 0.995,  0.98,  0.34,
  42, 0.999,  0.99,  0.48,
  49, 0.999, 0.999,  0.74
  ) 


pepper |> 
  pivot_longer(2:4, 
               names_to ="epidemic", 
               values_to = "inc") |>
  ggplot(aes(t, inc, color = epidemic))+
  geom_point()+
  geom_line()+
  annotate(geom = "text",
           x = 12, 
           y = 0.75,
           label = "1")+
  annotate(geom = "text",
           x = 25, 
           y = 0.75,
           label = "2")+
  annotate(geom = "text",
           x = 45, 
           y = 0.75,
           label = "3")+
  theme(legend.position = "none")






```

## Tabela de Contigência

As tabelas de contingência, também conhecidas como tabelas de frequência cruzada, são ferramentas estatísticas utilizadas para organizar e analisar a relação entre duas ou mais variáveis categóricas. Elas fornecem uma visão geral da frequência com que diferentes combinações de categorias ocorrem em um conjunto de dados.

```{r}

cr <- read_csv("https://raw.githubusercontent.com/emdelponte/paper-coffee-rust-Ethiopia/master/data/survey_clean.csv")

library(janitor)
cr |>
  tabyl(cultivar, farm_management)

library(ggthemes)

cr |>
  count(farm_management, cultivar) |>
  ggplot(aes(cultivar, n, fill = farm_management,
             label =n))+
  geom_col(position = "dodge2")+
  scale_fill_canva()+
  theme_bw()+
  theme(strip.text.x = element_blank(),
  legend.position = "top")+
  geom_text(position = position_dodge(width = 0.9)) +
  facet_wrap(~cultivar, scales = "free_x")




```

## Geom_errobar

As barras de erro, também conhecidas como error bars, são elementos gráficos que representam a incerteza ou variabilidade nos dados. Ao adicionar barras de erro aos seus gráficos, você pode comunicar informações valiosas sobre a confiabilidade dos seus resultados e facilitar a interpretação dos dados.

```{r}

library(gsheet)

mg <- gsheet2tbl("https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit#gid=983033137")

mg |>
  ggplot(aes(trat, comp))+
  geom_jitter(width = 0.1)

mg |>
  group_by(trat) |>
  summarise(mean_comp = mean(comp),
            sd_comp =sd(comp)) |>
  ggplot(aes(trat, mean_comp))+
  geom_point(size = 3)+
  ylim(0, 20)+
  geom_col(fill = "steelblue", width = 0.5)+
  geom_errorbar(aes(ymin = mean_comp - sd_comp,
                    ymax = mean_comp + sd_comp),
                width = 0.02)+
  annotate(geom = "text",
           x = 1, y = 17.5,
           label = "*")




```
